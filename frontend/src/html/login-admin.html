<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="global/global.css">
	<link rel="stylesheet" href="global/navbars.css">
	<link rel="stylesheet" href="global/header-footer.css">
	<link rel="stylesheet" href="login-admin.css">
	<title>Login</title>
</head>

<body>
	<nav class="admin-navbar">
		<ul>
			<li><a href="/">Home</a></li>
			<li><a href="aboutus">About Us</a></li>
			<li><a href="search">Search</a></li>
		</ul>
		<ul>
			<li><a href="login">Staff Portal</a></li>
		</ul>
	</nav>
	<header>
		<h1>Login</h1>
	</header>
	<div class="center">
		<form>
			<div class="txt_field">
				<input id="username" type="text" required>
				<span></span>
				<label>Username</label>
			</div>
			<div class="txt_field">
				<input id="pwd" type="password" required>
				<span></span>
				<label>Password</label>
			</div>
			<button onclick="login()" type="button" class="login-button">Login
				<!-- <a href="admin-management" button type="submit">Login</a> -->
			</button>
		</form>
		<div id="try-again">

		</div>
	</div>
	</div>

	<footer>
		<p>Copyright 2023 TPTPT Co. Ltd. All Rights Reserved</p>
	</footer>
	<script>
		async function login() {
			let url = 'http://localhost:3000/login-verify?' + new URLSearchParams({
				username: document.getElementById('username').value,
				pwd: document.getElementById('pwd').value
			});
			let response = await fetch(url);
			if (!response.ok) {
				throw new Error(`HTTP error ${response.status}`);
			}
			const data = await response.json();

			// if not error
			if (!data.error) {
				window.location.href = '/admin-management';
			}
			else {
				alert('Please try again.');
			}
		}
	</script>
</body>

</html>